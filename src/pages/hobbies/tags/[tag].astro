---
import Base from '../../../layouts/Base.astro';
import { getCollection } from 'astro:content';
export async function getStaticPaths() {
  const hobbies = await getCollection('hobbies');
  const uniqueTags = Array.from(new Set(hobbies.flatMap((p) => p.data.tags ?? [])));
  return uniqueTags.map((t) => ({ params: { tag: t } }));
}
const { tag } = Astro.params;
const posts = (await getCollection('hobbies')).filter(p => p.data.tags?.includes(tag as string));
---

<Base title={`Hobbies – ${tag}`}
  description={`Posts tagged ${tag}`}>
  <div class="mb-6">
    <a href="/" class="text-sm text-neutral-500 hover:text-neutral-900 transition-colors">← Back to home</a>
  </div>
  <h1 class="text-xl font-semibold mb-4">#{tag}</h1>
  <a href="/hobbies" class="text-sm underline">← All hobbies</a>
  <ul class="space-y-4 mt-4">
    {posts.map(p => (
      <li>
        <span class="font-medium">{p.data.title}</span>
        <span class="text-neutral-500 ml-2">{p.data.date}</span>
        {p.data.summary && <p class="text-neutral-600">{p.data.summary}</p>}
      </li>
    ))}
  </ul>
</Base>


